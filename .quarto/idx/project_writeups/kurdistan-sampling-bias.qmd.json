{"title":"A Multi Machine Learning Model Study of Sampling Bias and Environmental Correlation","markdown":{"yaml":{"title":"A Multi Machine Learning Model Study of Sampling Bias and Environmental Correlation","format":{"html":{"body-classes":"project-page"}}},"headingText":"A Multi Machine Learning Model Study of Sampling Bias and Environmental Correlation","containsRefs":false,"markdown":"\n\n\n**Project description:** This study acts as the initial proof of concept and variable testing phase for archaeological predictive mapping in the Northern Iraqi section of Kurdistan. The method and results herein are part of a larger study hoping to characterize the geoscientific environmental variables in this area. As archaeological site location data is usually strongly sample biased, we needed to construct a series of test models to see if these biases matched strongly with any of our covariates. Additionally, this gave us the chance to see if the results of our models were consistent with previous publications. We noted various issues with the site locations and environmental covariates and will be addressing these by building a new database that will be outlined in the full publication later this year.\n\n![](../assets/project_images/kurd/8.png?raw=true)\n\n### The Challenge of Sampling Bias\n\nArchaeological data is typically biased due to uneven sampling. Researchers often collect data from more accessible or visually promising locations, leaving significant gaps. This study tests various predictive models to assess how well they manage these biases and how they correlate with environmental variables.\n\n### Models Tested\n\nThis study employs several statistical and machine learning models:\n\n- Random Forest (RF): Programmed in R via the Biomod2 Library\n- Gradient Boosting Machine (GBM): Programmed in R via the Biomod2 Library\n- Maximum Entropy (MaxEnt): Created via the Maxent.jar GUI as it is written in pure Java and thus much faster over the large area and high number of covariates we used. \n\nAmong these, MaxEnt emerged as the most robust, particularly for archaeological data. It doesn't require absence data, only presence data, and uses a background point approach to characterize environmental probabilities. This feature is crucial in archaeology, where it's challenging to identify locations with no historical activity.\n\nAdditionally, Valavi et al. conducted an extensive evaluation of various species distribution modeling (SDM) algorithms, including machine learning and statistical methods. Their study assessed the performance of 20 different models, identifying Boosted Regression Trees (BRT), MaxEnt, a down-sampled Random Forest (RF), and ensemble models as the top performers. The research highlighted the strengths of MaxEnt for its conservative predictions, which is particularly useful in cases with presence-only data, like in archaeological site modeling. This evaluation serves as a benchmark for selecting appropriate models based on the specific requirements and data characteristics in SDM applications.\n\n![](../assets/project_images/kurd/7.png?raw=true)\n\n### Environmental Covariates Used  \n\n## Table 1: Description of Variables\n\n| Variable                             | Description                                                                 |\n|--------------------------------------|-----------------------------------------------------------------------------|\n| **Aspect**                           | Orientation of Slope. Calculated from the Slope layer.                     |\n| **C_PREC_\\***                        | Sum of precipitation over one year for one of the four time periods.       |\n| **C_TEMP_\\***                        | Average temperature over one year for one of the four time periods.        |\n| **DEM_GLO_25**                       | 25m x 25m Digital Elevation Model (DEM).                                   |\n| **Distance_to_road**                 | Distance to an Assyrian road located in the area.                          |\n| **Distance_to_water**                | Distance to small drainage valleys in the area of interest.                |\n| **Geohydrology**                     | Qualitatively based map of the availability of water, determined by geology. |\n| **Geology**                          | Geological map constructed by the Geological Survey of Iraq.               |\n| **Geomorphology**                    | Map of common geomorphological features, built from ground survey and remote sensing. |\n| **MRVBF**                            | Multi-resolution valley bottom flatness, computed from DEM.                |\n| **PREC_sum**                         | Modern average precipitation over one year in the modern age (1972-2000, WorldClim data). |\n| **Sentinel2_NDVI_2021_MedianComposite** | Normalized Difference Vegetation Index from Sentinel2 satellite data.       |\n| **Sentinel2_NDWI_2021_MedianComposite** | Normalized Difference Water Index from Sentinel2 satellite data.            |\n| **Slope**                            | Calculated from the DEM.                                                   |\n| **TEMP_AVG_average**                 | Modern average temperature over one year in the modern age (1972-2000, WorldClim data). |\n| **TPI**                              | Topographic Position Index, computed from the DEM, measuring elevation and slope. |\n| **TWI**                              | Topographic Wetness Index, computed from the DEM, indicating potential for water accumulation. |\n\n*Note: Variables with an asterisk (*) denote bespoke calculations for each time period.*\n\n## Table 2: Description of Problematic Variables\n\n| Variable            | Description                                                                                 |\n|---------------------|---------------------------------------------------------------------------------------------|\n| **Distance_cluster_\\*** | Distance to location of sites for the time period indicated by *.                          |\n| **Distance_sites_\\***   | Distance to location of sites for the age immediately preceding the indicated time period *. |\n\nOur input data was divided into four time periods: Early (EB), Middle (MB), and Late Bronze Age (LB), as well as the Iron Age (IA). Site locations were created by overlaying a map of the polygonal shapes of each site over a raster grid of the study area. Next, we created a point layer with a point in each of the overlapped cells. In this way larger sites would be represented by a larger collection of presence points and have a larger impact on the model. 17 covariates were gathered or calculated. These are shown in Table 1. \n\nTwo additional layers were calculated for each time period but they were eventually left out of our final calculations. These are shown in Table 2. The reason for leaving these out were that we had intended to measure the effects of site locations from different times on whatever age’s model we were building. However, the Distance_cluster_* caused massive overfitting problems as it is a single layer cost distance model for site location. Any model attempting to predict site locations will eventually discover the utility such a layer and ignore all others. The Distance_sites_* layers had much the same issue, as site locations did not change by large enough margins to be appreciably different from 5 Distance_cluster_*. Once we determined the issues with these layers we decided to drop them from the final data set and only use the preceding 17 covariates. For all models we divided the data into 4 folds for validation tests. We also conducted variable importance tests to measure the relative importance of each covariate. To create absence data for the GBM and RF models, a random selection of points outside of the site locations were found. This selection was equal in size to the amount of presence locations for each age. The MaxEnt model had 20,000 random points selected, some of which could be the same as the presence locations, as MaxEnt attempts to build a probability density distribution of the general background environment. \n\n\n### Predictive Map Results\n\nThe predictive models constructed in the study—Generalized Boosting Model, Random Forest, and Maximum Entropy—yielded varied results in predicting archaeological site locations in Kurdistan. RF tended to overfit, focusing too narrowly on presence locations and thus limiting its broader applicability. Both MaxEnt and GBM showed a pattern of overemphasis on the \"distance to water\" covariate, highlighting the environmental feature's influence but also suggesting potential overfitting and sampling bias. These outputs indicated that while the models could identify high-probability site areas, especially around known features like water sources, there is a need for further refinement to mitigate biases and improve generalizability. \n\nThe overreliance on the distance to water can be seen in the variable importance metrics for the different models:\n\n![](../assets/project_images/kurd/4.png?raw=true)\nGBM and RF variable importance metrics for the IA model set. The results were consistent across each time period as can be seen in the predictive maps below.\n\n![](../assets/project_images/kurd/5.png?raw=true)\nMaxent variable importance metrics for each time frame. \n\nDistanct to water covariate visualized in isolation. The darker green an area is the closer it is geographically to a mapped drainage valley. \n![](../assets/project_images/kurd/6.png?raw=true)\n\n\nBelow are the sresultant predictive maps. Note the similarity in output between the distance to water covariate and the final predictive map. \n\n![](../assets/project_images/kurd/1.png?raw=true)\n![](../assets/project_images/kurd/2.png?raw=true)\n\nGBM (Left Column) and RF (Right Column) Predictive Maps in order from EB, MB, LB, IA. Color is correlated with probability green denotes approaching 100% and white means approaching 0%. The values of the color bar can be divided by 1000 to get a percentage. \n\n![](../assets/project_images/kurd/3.png?raw=true)\n\nPredictive maps for MaxEnt. Red denotes approaching 100% probability and Blue means approaching 0% probability.\n\n### Explanation of Distance to Water Bias\n\nThe survey method used to locate sites in this region relied on archaeologists following the course of drainage valleys and noting any observed heritage resources. This approach contributed to sampling bias, as it skewed the data towards sites in proximity to water sources, in the case the drainage valleys themselves. As a result, the environmental covariates related to water proximity, such as \"distance to water,\" became overrepresented in the predictive models. This bias makes it challenging to distinguish whether the observed patterns are due to genuine archaeological factors or are artifacts of the survey method, potentially leading to overfitting and an unbalanced representation of the region's archaeological landscape.\n\n### Implications and Future Research Directions \n\nThe results underscore the importance of addressing both methodological and data-related biases in archaeological modeling. For example, the distance to water feature consistently influenced model outcomes, possibly reflecting both a genuine historical pattern and a bias in data collection methods. Further refinement of the dataset e.g. site density resampling and the inclusion of more diverse environmental layers may lead to the mitigation of these issues.\n\nThe study's insights are valuable for refining predictive models in archaeology, ensuring they can better account for biases and provide more accurate site predictions. As part of an ongoing project, the findings will contribute to a more comprehensive geoscientific survey of the region, scheduled for publication later this year.\n\nThis research not only advances our understanding of bias related to ancient human settlement patterns in Kurdistan but also enhances the methodological toolkit available to archaeologists worldwide.\n\n","srcMarkdownNoYaml":"\n\n## A Multi Machine Learning Model Study of Sampling Bias and Environmental Correlation\n\n**Project description:** This study acts as the initial proof of concept and variable testing phase for archaeological predictive mapping in the Northern Iraqi section of Kurdistan. The method and results herein are part of a larger study hoping to characterize the geoscientific environmental variables in this area. As archaeological site location data is usually strongly sample biased, we needed to construct a series of test models to see if these biases matched strongly with any of our covariates. Additionally, this gave us the chance to see if the results of our models were consistent with previous publications. We noted various issues with the site locations and environmental covariates and will be addressing these by building a new database that will be outlined in the full publication later this year.\n\n![](../assets/project_images/kurd/8.png?raw=true)\n\n### The Challenge of Sampling Bias\n\nArchaeological data is typically biased due to uneven sampling. Researchers often collect data from more accessible or visually promising locations, leaving significant gaps. This study tests various predictive models to assess how well they manage these biases and how they correlate with environmental variables.\n\n### Models Tested\n\nThis study employs several statistical and machine learning models:\n\n- Random Forest (RF): Programmed in R via the Biomod2 Library\n- Gradient Boosting Machine (GBM): Programmed in R via the Biomod2 Library\n- Maximum Entropy (MaxEnt): Created via the Maxent.jar GUI as it is written in pure Java and thus much faster over the large area and high number of covariates we used. \n\nAmong these, MaxEnt emerged as the most robust, particularly for archaeological data. It doesn't require absence data, only presence data, and uses a background point approach to characterize environmental probabilities. This feature is crucial in archaeology, where it's challenging to identify locations with no historical activity.\n\nAdditionally, Valavi et al. conducted an extensive evaluation of various species distribution modeling (SDM) algorithms, including machine learning and statistical methods. Their study assessed the performance of 20 different models, identifying Boosted Regression Trees (BRT), MaxEnt, a down-sampled Random Forest (RF), and ensemble models as the top performers. The research highlighted the strengths of MaxEnt for its conservative predictions, which is particularly useful in cases with presence-only data, like in archaeological site modeling. This evaluation serves as a benchmark for selecting appropriate models based on the specific requirements and data characteristics in SDM applications.\n\n![](../assets/project_images/kurd/7.png?raw=true)\n\n### Environmental Covariates Used  \n\n## Table 1: Description of Variables\n\n| Variable                             | Description                                                                 |\n|--------------------------------------|-----------------------------------------------------------------------------|\n| **Aspect**                           | Orientation of Slope. Calculated from the Slope layer.                     |\n| **C_PREC_\\***                        | Sum of precipitation over one year for one of the four time periods.       |\n| **C_TEMP_\\***                        | Average temperature over one year for one of the four time periods.        |\n| **DEM_GLO_25**                       | 25m x 25m Digital Elevation Model (DEM).                                   |\n| **Distance_to_road**                 | Distance to an Assyrian road located in the area.                          |\n| **Distance_to_water**                | Distance to small drainage valleys in the area of interest.                |\n| **Geohydrology**                     | Qualitatively based map of the availability of water, determined by geology. |\n| **Geology**                          | Geological map constructed by the Geological Survey of Iraq.               |\n| **Geomorphology**                    | Map of common geomorphological features, built from ground survey and remote sensing. |\n| **MRVBF**                            | Multi-resolution valley bottom flatness, computed from DEM.                |\n| **PREC_sum**                         | Modern average precipitation over one year in the modern age (1972-2000, WorldClim data). |\n| **Sentinel2_NDVI_2021_MedianComposite** | Normalized Difference Vegetation Index from Sentinel2 satellite data.       |\n| **Sentinel2_NDWI_2021_MedianComposite** | Normalized Difference Water Index from Sentinel2 satellite data.            |\n| **Slope**                            | Calculated from the DEM.                                                   |\n| **TEMP_AVG_average**                 | Modern average temperature over one year in the modern age (1972-2000, WorldClim data). |\n| **TPI**                              | Topographic Position Index, computed from the DEM, measuring elevation and slope. |\n| **TWI**                              | Topographic Wetness Index, computed from the DEM, indicating potential for water accumulation. |\n\n*Note: Variables with an asterisk (*) denote bespoke calculations for each time period.*\n\n## Table 2: Description of Problematic Variables\n\n| Variable            | Description                                                                                 |\n|---------------------|---------------------------------------------------------------------------------------------|\n| **Distance_cluster_\\*** | Distance to location of sites for the time period indicated by *.                          |\n| **Distance_sites_\\***   | Distance to location of sites for the age immediately preceding the indicated time period *. |\n\nOur input data was divided into four time periods: Early (EB), Middle (MB), and Late Bronze Age (LB), as well as the Iron Age (IA). Site locations were created by overlaying a map of the polygonal shapes of each site over a raster grid of the study area. Next, we created a point layer with a point in each of the overlapped cells. In this way larger sites would be represented by a larger collection of presence points and have a larger impact on the model. 17 covariates were gathered or calculated. These are shown in Table 1. \n\nTwo additional layers were calculated for each time period but they were eventually left out of our final calculations. These are shown in Table 2. The reason for leaving these out were that we had intended to measure the effects of site locations from different times on whatever age’s model we were building. However, the Distance_cluster_* caused massive overfitting problems as it is a single layer cost distance model for site location. Any model attempting to predict site locations will eventually discover the utility such a layer and ignore all others. The Distance_sites_* layers had much the same issue, as site locations did not change by large enough margins to be appreciably different from 5 Distance_cluster_*. Once we determined the issues with these layers we decided to drop them from the final data set and only use the preceding 17 covariates. For all models we divided the data into 4 folds for validation tests. We also conducted variable importance tests to measure the relative importance of each covariate. To create absence data for the GBM and RF models, a random selection of points outside of the site locations were found. This selection was equal in size to the amount of presence locations for each age. The MaxEnt model had 20,000 random points selected, some of which could be the same as the presence locations, as MaxEnt attempts to build a probability density distribution of the general background environment. \n\n\n### Predictive Map Results\n\nThe predictive models constructed in the study—Generalized Boosting Model, Random Forest, and Maximum Entropy—yielded varied results in predicting archaeological site locations in Kurdistan. RF tended to overfit, focusing too narrowly on presence locations and thus limiting its broader applicability. Both MaxEnt and GBM showed a pattern of overemphasis on the \"distance to water\" covariate, highlighting the environmental feature's influence but also suggesting potential overfitting and sampling bias. These outputs indicated that while the models could identify high-probability site areas, especially around known features like water sources, there is a need for further refinement to mitigate biases and improve generalizability. \n\nThe overreliance on the distance to water can be seen in the variable importance metrics for the different models:\n\n![](../assets/project_images/kurd/4.png?raw=true)\nGBM and RF variable importance metrics for the IA model set. The results were consistent across each time period as can be seen in the predictive maps below.\n\n![](../assets/project_images/kurd/5.png?raw=true)\nMaxent variable importance metrics for each time frame. \n\nDistanct to water covariate visualized in isolation. The darker green an area is the closer it is geographically to a mapped drainage valley. \n![](../assets/project_images/kurd/6.png?raw=true)\n\n\nBelow are the sresultant predictive maps. Note the similarity in output between the distance to water covariate and the final predictive map. \n\n![](../assets/project_images/kurd/1.png?raw=true)\n![](../assets/project_images/kurd/2.png?raw=true)\n\nGBM (Left Column) and RF (Right Column) Predictive Maps in order from EB, MB, LB, IA. Color is correlated with probability green denotes approaching 100% and white means approaching 0%. The values of the color bar can be divided by 1000 to get a percentage. \n\n![](../assets/project_images/kurd/3.png?raw=true)\n\nPredictive maps for MaxEnt. Red denotes approaching 100% probability and Blue means approaching 0% probability.\n\n### Explanation of Distance to Water Bias\n\nThe survey method used to locate sites in this region relied on archaeologists following the course of drainage valleys and noting any observed heritage resources. This approach contributed to sampling bias, as it skewed the data towards sites in proximity to water sources, in the case the drainage valleys themselves. As a result, the environmental covariates related to water proximity, such as \"distance to water,\" became overrepresented in the predictive models. This bias makes it challenging to distinguish whether the observed patterns are due to genuine archaeological factors or are artifacts of the survey method, potentially leading to overfitting and an unbalanced representation of the region's archaeological landscape.\n\n### Implications and Future Research Directions \n\nThe results underscore the importance of addressing both methodological and data-related biases in archaeological modeling. For example, the distance to water feature consistently influenced model outcomes, possibly reflecting both a genuine historical pattern and a bias in data collection methods. Further refinement of the dataset e.g. site density resampling and the inclusion of more diverse environmental layers may lead to the mitigation of these issues.\n\nThe study's insights are valuable for refining predictive models in archaeology, ensuring they can better account for biases and provide more accurate site predictions. As part of an ongoing project, the findings will contribute to a more comprehensive geoscientific survey of the region, scheduled for publication later this year.\n\nThis research not only advances our understanding of bias related to ancient human settlement patterns in Kurdistan but also enhances the methodological toolkit available to archaeologists worldwide.\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"body-classes":"project-page"},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":false,"output-file":"kurdistan-sampling-bias.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.25","smooth-scroll":true,"theme":["cosmo","../assets/scripts/custom.scss"],"includes":{"after-body":"../assets/scripts/fit-title.html"},"page-layout":"full","title":"A Multi Machine Learning Model Study of Sampling Bias and Environmental Correlation"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}